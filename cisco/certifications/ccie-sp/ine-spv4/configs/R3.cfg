ip multicast-routing distributed
!
interface Loopback0
 ip address 3.3.3.3 255.255.255.255
 ipv6 address 2001::3:3:3:3/128
{{- if .Env.MULTICAST }}
ip pim sparse-mode
{{- end}}
!
{{- if .Env.ISIS }}
router isis 1
 net 49.0000.0000.0000.0003.00
 is-type level-2-only
 metric-style wide
 advertise passive-only
 passive-interface Loopback0
 address-family ipv6
  multi-topology
  advertise passive-only
{{- if .Env.LDP }}
 mpls ldp autoconfig
{{- end}}
!
{{- end}}
interface GigabitEthernet2
 no shutdown
 no ip address
 negotiation auto
 no mop enabled
 no mop sysid
 service instance 4094 ethernet
  encapsulation dot1q 4094
!
interface GigabitEthernet2.23
 no shutdown
 encapsulation dot1Q 23
 ip address 20.2.3.3 255.255.255.0
 ipv6 address 2001:20:2:3::3/64
{{- if .Env.ISIS }}
 isis network point-to-point
 ip router isis 1
 ipv6 router isis 1
{{- end}}
{{- if .Env.MULTICAST }}
ip pim sparse-mode
{{- end}}
!
interface GigabitEthernet2.34
 no shutdown
 encapsulation dot1Q 34
 ip address 20.3.4.3 255.255.255.0
 ipv6 address 2001:20:3:4::3/64
{{- if .Env.ISIS }}
 isis network point-to-point
 ip router isis 1
 ipv6 router isis 1
{{- end}}
{{- if .Env.MULTICAST }}
ip pim sparse-mode
{{- end}}
!
interface GigabitEthernet2.36
 no shutdown
 encapsulation dot1Q 36
 ip address 20.3.6.3 255.255.255.0
 ipv6 address 2001:20:3:6::3/64
{{- if .Env.ISIS }}
 isis network point-to-point
 ip router isis 1
 ipv6 router isis 1
{{- end}}
{{- if .Env.MULTICAST }}
ip pim sparse-mode
{{- end}}
!
{{- if .Env.LDP }}
mpls ldp router-id Loopback0
{{- end}}
!
{{- if .Env.L3VPN }}
router bgp 100
 bgp router-id 3.3.3.3
 bgp log-neighbor-changes
 no bgp default ipv4-unicast
 neighbor 2.2.2.2 remote-as 100
 neighbor 2.2.2.2 update-source Loopback0
 neighbor 4.4.4.4 remote-as 100
 neighbor 4.4.4.4 update-source Loopback0
 neighbor 5.5.5.5 remote-as 100
 neighbor 5.5.5.5 update-source Loopback0
 neighbor 19.19.19.19 remote-as 100
 neighbor 19.19.19.19 update-source Loopback0
 address-family vpnv4 unicast
  neighbor 2.2.2.2 activate
  neighbor 2.2.2.2 route-reflector-client
  neighbor 4.4.4.4 activate
  neighbor 4.4.4.4 route-reflector-client
  neighbor 5.5.5.5 activate
  neighbor 5.5.5.5 route-reflector-client
  neighbor 19.19.19.19 activate
  neighbor 19.19.19.19 route-reflector-client
 exit
!
{{- end}}