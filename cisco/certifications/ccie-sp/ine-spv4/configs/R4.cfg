ip multicast-routing distributed
!
interface Loopback0
 ip address 4.4.4.4 255.255.255.255
 ipv6 address 2001::4:4:4:4/128
{{- if .Env.MULTICAST }}
ip pim sparse-mode
{{- end}}
!
{{- if .Env.ISIS }}
router isis 1
 net 49.0000.0000.0000.0004.00
 is-type level-2-only
 metric-style wide
 advertise passive-only
 passive-interface Loopback0
 address-family ipv6
  multi-topology
  advertise passive-only
{{- if .Env.LDP }}
 mpls ldp autoconfig
{{- end}}
!
{{- end}}
interface GigabitEthernet2
 no shutdown
 no ip address
 negotiation auto
 no mop enabled
 no mop sysid
 service instance 4094 ethernet
  encapsulation dot1q 4094
!
interface GigabitEthernet2.24
 no shutdown
 encapsulation dot1Q 24
 ip address 20.2.4.4 255.255.255.0
 ipv6 address 2001:20:2:4::4/64
{{- if .Env.ISIS }}
 isis network point-to-point
 ip router isis 1
 ipv6 router isis 1
{{- end}}
{{- if .Env.MULTICAST }}
ip pim sparse-mode
{{- end}}
!
interface GigabitEthernet2.34
 no shutdown
 encapsulation dot1Q 34
 ip address 20.3.4.4 255.255.255.0
 ipv6 address 2001:20:3:4::4/64
{{- if .Env.ISIS }}
 isis network point-to-point
 ip router isis 1
 ipv6 router isis 1
{{- end}}
{{- if .Env.MULTICAST }}
ip pim sparse-mode
{{- end}}
!
interface GigabitEthernet2.45
 no shutdown
 encapsulation dot1Q 45
 ip address 20.4.5.4 255.255.255.0
 ipv6 address 2001:20:4:5::4/64
{{- if .Env.ISIS }}
 isis network point-to-point
 ip router isis 1
 ipv6 router isis 1
{{- end}}
{{- if .Env.MULTICAST }}
ip pim sparse-mode
{{- end}}
!
interface GigabitEthernet2.46
 no shutdown
 encapsulation dot1Q 46
 ip address 20.4.6.4 255.255.255.0
 ipv6 address 2001:20:4:6::4/64
{{- if .Env.ISIS }}
 isis network point-to-point
 ip router isis 1
 ipv6 router isis 1
{{- end}}
{{- if .Env.MULTICAST }}
ip pim sparse-mode
{{- end}}
!
interface GigabitEthernet2.47
 no shutdown
 encapsulation dot1Q 47
 ip address 10.4.7.4 255.255.255.0
 ipv6 address 2001:10:4:7::4/64
 negotiation auto
 no mop enabled
 no mop sysid
!
{{- if .Env.MULTICAST }}
ip pim sparse-mode
{{- end}}
{{- if .Env.LDP }}
mpls ldp router-id Loopback0
{{- end}}
!
{{- if .Env.BGP }}
router bgp 100
 bgp router-id 4.4.4.4
 bgp log-neighbor-changes
 no bgp default ipv4-unicast
{{- end}}