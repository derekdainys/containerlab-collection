ip multicast-routing distributed
interface Loopback0
 ip address 5.5.5.5 255.255.255.255
 ipv6 address 2001::5:5:5:5/128
{{- if .Env.MULTICAST }}
ip pim sparse-mode
{{- end}}
!
{{- if .Env.ISIS }}
router isis 1
 net 49.0000.0000.0000.0005.00
 is-type level-2-only
 metric-style wide
 advertise passive-only
 passive-interface Loopback0
 address-family ipv6
  multi-topology
  advertise passive-only
{{- if .Env.LDP }}
 mpls ldp autoconfig
{{- end}}
!
{{- end}}
interface GigabitEthernet2
 no shutdown
 no ip address
 negotiation auto
 no mop enabled
 no mop sysid
 service instance 4094 ethernet
  encapsulation dot1q 4094
!
{{- if .Env.L3VPN }}
vrf definition VPN_A
 rd 5.5.5.5:1
 address-family ipv4 unicast
  route-target both 100:1
 exit
 address-family ipv6 unicast
  route-target both 100:1
 exit
!
{{- end}}
interface GigabitEthernet2.45
 no shutdown
 encapsulation dot1Q 45
 ip address 20.4.5.5 255.255.255.0
 ipv6 address 2001:20:4:5::5/64
{{- if .Env.ISIS }}
 isis network point-to-point
 ip router isis 1
 ipv6 router isis 1
{{- end}}
{{- if .Env.MULTICAST }}
ip pim sparse-mode
{{- end}}
!
interface GigabitEthernet2.56
 no shutdown
 encapsulation dot1Q 56
 ip address 20.5.6.5 255.255.255.0
 ipv6 address 2001:20:5:6::5/64
{{- if .Env.ISIS }}
 isis network point-to-point
 ip router isis 1
 ipv6 router isis 1
{{- end}}
{{- if .Env.MULTICAST }}
ip pim sparse-mode
{{- end}}
!
interface GigabitEthernet2.58
 no shutdown
 encapsulation dot1Q 58
{{- if .Env.L3VPN }}
 vrf forwarding VPN_A
{{- end}}
 ip address 10.5.8.5 255.255.255.0
 ipv6 address 2001:10:5:8::5/64
 negotiation auto
 no mop enabled
 no mop sysid
!
{{- if .Env.MULTICAST }}
ip pim sparse-mode
{{- end}}
!
interface GigabitEthernet2.519
 no shutdown
 encapsulation dot1Q 519
 ip address 20.5.19.5 255.255.255.0
 ipv6 address 2001:20:5:19::5/64
{{- if .Env.ISIS }}
 isis network point-to-point
 ip router isis 1
 ipv6 router isis 1
{{- end}}
{{- if .Env.MULTICAST }}
ip pim sparse-mode
{{- end}}
!
{{- if .Env.LDP }}
mpls ldp router-id Loopback0
{{- end}}
!
{{- if .Env.L3VPN }}
router bgp 100
 bgp router-id 5.5.5.5
 bgp log-neighbor-changes
 no bgp default ipv4-unicast
 neighbor 3.3.3.3 remote-as 100
 neighbor 3.3.3.3 update-source Loopback0
 address-family vpnv4 unicast
  neighbor 3.3.3.3 activate
 exit
!
{{- end}}