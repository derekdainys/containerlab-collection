!
hostname {{ .ShortName }}
!
username clab
 group root-lr
 group cisco-support
 secret clab@123
!
grpc
{{ if .Env.CLAB_MGMT_VRF }} vrf {{ .Env.CLAB_MGMT_VRF }}{{end}}
 port 9339
 no-tls
 address-family dual
!
{{- if .Env.CLAB_MGMT_VRF }}
vrf {{ .Env.CLAB_MGMT_VRF }}
 address-family ipv4 unicast
 !
 address-family ipv6 unicast
 !
{{- end}}
!
line default
  transport input ssh
!
netconf-yang agent
 ssh
!
interface MgmtEth0/RP0/CPU0/0
{{ if .Env.CLAB_MGMT_VRF }} vrf {{ .Env.CLAB_MGMT_VRF }}{{end}}
!
router static
{{ if .Env.CLAB_MGMT_VRF }} vrf {{ .Env.CLAB_MGMT_VRF }}{{end}}
{{- if .MgmtIPv4Gateway }}
 address-family ipv4 unicast
  0.0.0.0/0 MgmtEth0/RP0/CPU0/0 {{ .MgmtIPv4Gateway }}
  !
{{- end}}
{{- if .MgmtIPv6Gateway }}
 address-family ipv6 unicast
  ::/0 MgmtEth0/RP0/CPU0/0 {{ .MgmtIPv6Gateway }}
  !
{{- end}}
!
ssh server v2
{{- if .Env.CLAB_MGMT_VRF }}
ssh server vrf {{ .Env.CLAB_MGMT_VRF }}
{{- end}}
ssh server netconf {{ if .Env.CLAB_MGMT_VRF }} vrf {{ .Env.CLAB_MGMT_VRF }}{{end}}
interface Loopback0
 ipv4 address 19.19.19.19 255.255.255.255
 ipv6 address 2001::19:19:19:19/128
!
interface GigabitEthernet0/0/0/0
 cdp
!
interface GigabitEthernet0/0/0/0.519
 ipv4 address 20.5.19.19 255.255.255.0
 ipv6 address 2001:20:5:19::19/64
 encapsulation dot1q 519
!
interface GigabitEthernet0/0/0/0.619
 ipv4 address 20.6.19.19 255.255.255.0
 ipv6 address 2001:20:6:19::19/64
 encapsulation dot1q 619
!
interface GigabitEthernet0/0/0/0.1920
 ipv4 address 10.19.20.19 255.255.255.0
 ipv6 address 2001:10:19:20::19/64
 encapsulation dot1q 1920
!
{{- if .Env.ISIS }}
router isis 1
 is-type level-2-only
 net 49.0000.0000.0000.0019.00
 address-family ipv4 unicast
  metric-style wide
  advertise passive-only
{{- if .Env.LDP }}
  mpls ldp auto-config
{{- end}}
 !
 address-family ipv6 unicast
  advertise passive-only
 !
 interface Loopback0
  passive
  address-family ipv4 unicast
  !
  address-family ipv6 unicast
  !
 !
 interface GigabitEthernet0/0/0/0.519
  point-to-point
  address-family ipv4 unicast
  !
  address-family ipv6 unicast
  !
 !
 interface GigabitEthernet0/0/0/0.619
  point-to-point
  address-family ipv4 unicast
  !
  address-family ipv6 unicast
  !
 !
{{- if not .Env.CE }}
 interface GigabitEthernet0/0/0/0.1920
  point-to-point
  address-family ipv4 unicast
  !
  address-family ipv6 unicast
  !
 !
{{- end}}
!
{{- end}}
{{- if .Env.LDP }}
mpls ldp
 router-id 19.19.19.19
{{- end}}
{{- if .Env.MULTICAST }}
multicast-routing
 address-family ipv4
  interface GigabitEthernet0/0/0/0.519
   enable
  !
  interface GigabitEthernet0/0/0/0.619
   enable
  !
  interface GigabitEthernet0/0/0/0.1920
   enable
  !
  interface Loopback0
   enable
 !
!
{{- end}}
{{- if .Env.BGP }}
router bgp 100
 bgp router-id 19.19.19.19
 bgp unsafe-ebgp-policy
{{- end}}
